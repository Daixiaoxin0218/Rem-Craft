@use "sass:map";
@use "../../common" as *;
@use "heading";
@use "list";

$bq-color: map.get($text, "secondary");

$side-left: $fn-space;
$side-w: 3px;
$pad-l: 12px;

//引述块
@mixin bq {
  position: relative;
  background-color: transparent;
  padding: 4px 0;
  border: none;

  &::before {
    content: "";
    display: block;
    position: absolute;
    width: $side-w;
    height: calc(100% - 8px * 2);
    top: $side-left;
    bottom: $side-left;
    left: $side-left;
    z-index: 0;
    border-radius: map.get($radius, "medium");
    background-color: map.get($text, "primary");
  }
}

.b3-typography,
.protyle-wysiwyg {
  .bq {
    @include bq();

    // 一级子元素
    > [data-node-id] {
      margin-left: $side-left + $side-w;
      padding-left: $pad-l;
      &[data-type="NodeHeading"] {
        &:first-child {
          margin-top: $pad-l + $side-w;
        }
        &::before {
          left: heading.$left - $side-left !important;
        }
      }
    }

    // 所有子元素
    [data-node-id] {
      color: $bq-color;
    }

    > .list {
      margin-left: $side-left + $side-w + list.$left;
      padding-left: 0;
    }

    &[fold="1"] {
      height: 48px !important;
      > div:first-child{
        font-size: 1em !important;
        line-height: 1.625 !important;
        height: auto !important;
        margin-top: 4px !important;
        margin-bottom: 4px;
        padding-top: 4px;
        padding-bottom: 4px;
      }
    }
  }
}

.b3-typography blockquote {
  @include bq();

  > * {
    margin-left: $side-left + $side-w;
    padding-left: $pad-l;
  }

  * {
    color: $bq-color;
  }
}
