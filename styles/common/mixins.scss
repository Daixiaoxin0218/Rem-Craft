@use "sass:map";
@use "sass:math";
@use "var" as *;
@use "utils" as *;

@mixin focus-before($top, $left: 0) {
  position: relative;

  &::before {
    @include reset-style();
    @include reset-position();
    content: "";
    display: block;
    position: absolute;
    top: $top;
    bottom: $top;
    left: $left;
    width: 3px;
    z-index: 0;
    height: calc(100% - $top * 2);
    background-color: map.get($color, "brand", "base");
    border-radius: map.get($radius, "max");
  }
}

@mixin history-btn {
  width: 36px;
  height: 30px;
  padding: 5px 8px;
  border-radius: map.get($radius, "base");

  svg {
    &:first-child {
      width: 12px;
      height: 12px;
    }

    &:last-child {
      width: 8px;
    }
  }
}

@mixin search-item {
  $text-h: 20px;
  $padding: $interval;
  padding-bottom: $text-h + $padding;
  height: $text-h * 2 + $padding * 3;

  .b3-list-item__meta {
    top: $text-h + $padding * 2;
    right: 8px;
    max-width: 100%;
    position: absolute;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  }
}

@mixin add-icon($icon_name, $color, $size, $position) {
  background-color: $color;
  $icon_url: "#{$asset-path}/icons/#{$icon_name}_black_#{$size}dp.svg";
  -webkit-mask: url($icon_url) #{$position};
  mask: url($icon_url) #{$position};
}

@mixin counter($h: 20px) {
  @include center();
  @include v-center($h);
  @include item("component");
  width: auto;
  margin: 0;
  border-radius: map.get($radius, "small");
  padding: 0 math.div($h - 8px, 2);
  &::after {
    display: none !important;
  }
}

@mixin emoji-icon($width, $fz, $icon-width) {
  @include v-center($width);
  padding: 0;
  width: $width;
  // 原生emoji
  font-size: $fz;

  // 自定义emoji
  img,
  // twitter-emoji
  svg.custom-icon {
    @include svg($width, $icon-width);
  }
}

@mixin drag {
  $drag-width: 2px;
  $drag-color: map.get($color, "brand", 5);

  background-color: map.get($bg, "brand");
  // 当前块的上方
  &__top {
    box-shadow: 0 0 - $drag-width $drag-color;
  }

  // 当前块的下方
  &__bottom {
    box-shadow: 0 $drag-width $drag-color;
  }

  // 当前块的左方
  &__left {
    box-shadow: -$drag-width 0 $drag-color;
  }

  // 当前块的右方
  &__right {
    box-shadow: $drag-width 0 $drag-color;
  }
}
